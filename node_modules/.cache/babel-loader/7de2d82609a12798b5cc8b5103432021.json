{"ast":null,"code":"var _jsxFileName = \"C:\\\\take-home-frontend\\\\src\\\\components\\\\GifExpanded.js\";\nimport React, { Component } from 'react';\nimport GifButtons from '../components/GifButtons';\nimport '../stylesheets/GifExpanded.css';\n/*\r\n* Expands an Expandable Gif \r\n* Includes: \r\n*\t- Favorite Function \r\n*\t- More Info Panel\r\n*\t- Sharing Links \r\n*/\n\nclass GifExpanded extends Component {\n  /*\r\n  * Calculates max width for Gif Expanded \r\n  * App.width = Screen.width * .90 \r\n  * TrendingVertical.width = 212\r\n  * max width = screen.width * .90 - 212\r\n  */\n  calculateMaxWidth() {\n    return this.props.dimensions.width * .9 - 212;\n  }\n  /*\r\n  * Giphy marginTop = 10px \r\n  * Logo Height = 70px \r\n  * Search Bar Height = 52px\r\n  * Main Content Height = 20px\r\n  * Title height = 31px \r\n  * IMG marginBottom = 20px\r\n  * GIF expanded marginBottom = 20px\r\n  */\n\n\n  calculateMaxHeight() {\n    return this.props.dimensions.height - 10 - 70 - 52 - 20 - 31 - 20 - 20;\n  }\n  /*\r\n  * Finds largest image type that is less\r\n  * than screen max width \r\n  */\n\n\n  findBestImageFormat() {\n    const maxWidth = this.calculateMaxWidth();\n    const maxHeight = this.calculateMaxHeight();\n    const images = this.props.pic.images;\n    /*\r\n    * Get list of possible keys \r\n    * Remove unwanted keys \r\n    * Iterate and find the best image format \r\n    */\n\n    let keys = Object.keys(images);\n    keys.splice(keys.indexOf('fixed_height_still'), 1);\n    keys.splice(keys.indexOf('fixed_width_still'), 1);\n    keys.splice(keys.indexOf('fixed_height_small_still'), 1);\n    keys.splice(keys.indexOf('fixed_width_small_still'), 1);\n    keys.splice(keys.indexOf('downsized_still'), 1);\n    keys.splice(keys.indexOf('original_still'), 1);\n    keys.splice(keys.indexOf('480w_still'), 1);\n    /*\r\n    * Filter possible formats with max \r\n    * height and width constraint \r\n    */\n\n    let widthToType = {};\n\n    for (let i = 0; i < keys.length; i++) {\n      if (images[keys[i]].width < maxWidth && images[keys[i]].height < maxHeight) {\n        widthToType[images[keys[i]].width] = keys[i];\n      }\n    }\n    /*\r\n    * Returns format with largest width while satisifying max constraints \r\n    */\n\n\n    keys = Object.keys(widthToType).map(num => {\n      return parseInt(num, 10);\n    });\n    const bestKey = Math.max(...keys);\n    return widthToType[bestKey];\n  }\n  /*\r\n  * render img or video according format type\r\n  */\n\n\n  renderImgOrVideo(format) {\n    let title = this.props.pic.title;\n    const IMG = this.props.pic.images[format];\n    let width = IMG.width;\n    let height = IMG.height;\n    let is_img = true;\n\n    if (IMG.url === undefined) {\n      is_img = false;\n    }\n    /*\r\n    * Scale an image if it's too small \r\n    */\n\n\n    const SCALES = [2, 1.75, 1.5, 1.25];\n\n    for (let i = 0; i < SCALES.length; i++) {\n      if (width <= this.calculateMaxWidth() / SCALES[i] && height <= this.calculateMaxHeight() / SCALES[i]) {\n        width *= SCALES[i];\n        height *= SCALES[i];\n        break;\n      }\n    }\n\n    if (!is_img) {\n      const mp4 = IMG.mp4;\n      return React.createElement(\"video\", {\n        src: mp4,\n        autoPlay: true,\n        loop: true,\n        muted: true,\n        playsInline: true,\n        onError: () => {\n          this.onError = () => {};\n\n          this.src = mp4;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      });\n    } else {\n      const url = IMG.url;\n      return React.createElement(\"img\", {\n        src: url,\n        height: height,\n        width: width,\n        alt: title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      });\n    }\n  }\n\n  renderSharePanel() {\n    const url = this.props.pic.url;\n    const bitly_url = this.props.pic.bitly_url;\n    const embed_url = this.props.pic.embed_url;\n    const source = this.props.pic.source;\n    const source_post_url = this.props.pic.source_post_url;\n    const style = {\n      opacity: this.props.share_is_off ? 1 : 0\n    };\n    return React.createElement(\"div\", {\n      className: \"share-box panel\",\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, 'Original'), React.createElement(\"a\", {\n      href: bitly_url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, 'Bitly'), React.createElement(\"a\", {\n      href: embed_url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, 'Embed'), React.createElement(\"a\", {\n      href: source,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, 'Source'), React.createElement(\"a\", {\n      href: source_post_url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, 'Source Post'));\n  }\n\n  renderInfoPanel(format) {\n    const username = this.props.pic.username;\n    const rating = this.props.pic.rating;\n    let import_datetime = this.props.pic.import_datetime;\n    const width = this.props.pic.images[format].width;\n    const height = this.props.pic.images[format].height;\n    import_datetime = import_datetime ? import_datetime.slice(5, 7) + \"/\" + import_datetime.slice(8, 10) + \"/\" + import_datetime.slice(0, 4) : 'N/A';\n    let source = 'URL';\n\n    if (this.props.pic.images[format].url === undefined) {\n      source = 'MP4';\n    }\n\n    const style = {\n      opacity: this.props.btn_is_x ? 1 : 0\n    };\n    return React.createElement(\"div\", {\n      className: \"info-box panel\",\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, 'Owner: ' + (username ? username : 'N/A')), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, 'Rating: ' + rating.toUpperCase()), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, 'Dimension: ' + width + ' x ' + height + ' px'), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, 'Uploaded: ' + import_datetime), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, 'Type: ' + source));\n  }\n\n  render() {\n    if (this.props.pic === null) {\n      return null;\n    }\n\n    const title = this.props.pic.title;\n    const format = this.findBestImageFormat();\n    return React.createElement(\"div\", {\n      className: \"gif-expanded\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"title-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"title GIF-TITLE\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, title ? title : 'N/A'), React.createElement(GifButtons, {\n      pic: this.props.pic,\n      btn_is_x: this.props.btn_is_x,\n      handleInfoButton: this.props.handleInfoButton,\n      handleShareButton: this.props.handleShareButton,\n      handleFavoriteButton: this.props.handleFavoriteButton,\n      share_is_off: this.props.share_is_off,\n      favorites: this.props.favorites,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"asset-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, this.renderImgOrVideo(format), this.renderInfoPanel(format), this.renderSharePanel())));\n  }\n\n}\n\nexport default GifExpanded;","map":{"version":3,"sources":["C:\\take-home-frontend\\src\\components\\GifExpanded.js"],"names":["React","Component","GifButtons","GifExpanded","calculateMaxWidth","props","dimensions","width","calculateMaxHeight","height","findBestImageFormat","maxWidth","maxHeight","images","pic","keys","Object","splice","indexOf","widthToType","i","length","map","num","parseInt","bestKey","Math","max","renderImgOrVideo","format","title","IMG","is_img","url","undefined","SCALES","mp4","onError","src","renderSharePanel","bitly_url","embed_url","source","source_post_url","style","opacity","share_is_off","renderInfoPanel","username","rating","import_datetime","slice","btn_is_x","toUpperCase","render","handleInfoButton","handleShareButton","handleFavoriteButton","favorites"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport GifButtons from '../components/GifButtons';\r\nimport '../stylesheets/GifExpanded.css';\r\n\r\n/*\r\n* Expands an Expandable Gif \r\n* Includes: \r\n*\t- Favorite Function \r\n*\t- More Info Panel\r\n*\t- Sharing Links \r\n*/\r\nclass GifExpanded extends Component {\r\n\r\n\t/*\r\n\t* Calculates max width for Gif Expanded \r\n\t* App.width = Screen.width * .90 \r\n\t* TrendingVertical.width = 212\r\n\t* max width = screen.width * .90 - 212\r\n\t*/\r\n\tcalculateMaxWidth() {\r\n\t\treturn (this.props.dimensions.width*.9) - 212; \r\n\t}\r\n\r\n\t/*\r\n\t* Giphy marginTop = 10px \r\n\t* Logo Height = 70px \r\n\t* Search Bar Height = 52px\r\n\t* Main Content Height = 20px\r\n\t* Title height = 31px \r\n\t* IMG marginBottom = 20px\r\n\t* GIF expanded marginBottom = 20px\r\n\t*/\r\n\tcalculateMaxHeight() {\r\n\t\treturn this.props.dimensions.height - 10 - 70 - 52 - 20 - 31- 20 - 20;\r\n\t}\r\n\r\n\t/*\r\n\t* Finds largest image type that is less\r\n\t* than screen max width \r\n\t*/\r\n\tfindBestImageFormat() {\r\n\t\tconst maxWidth = this.calculateMaxWidth(); \r\n\t\tconst maxHeight = this.calculateMaxHeight(); \r\n\t\tconst {images} = this.props.pic; \r\n\r\n\t\t/*\r\n\t\t* Get list of possible keys \r\n\t\t* Remove unwanted keys \r\n\t\t* Iterate and find the best image format \r\n\t\t*/\r\n\t\tlet keys = Object.keys(images);\r\n\t\tkeys.splice( keys.indexOf('fixed_height_still'), 1 );\r\n\t\tkeys.splice( keys.indexOf('fixed_width_still'), 1 );\r\n\t\tkeys.splice( keys.indexOf('fixed_height_small_still'), 1 );\r\n\t\tkeys.splice( keys.indexOf('fixed_width_small_still'), 1 );\r\n\t\tkeys.splice( keys.indexOf('downsized_still'), 1 );\r\n\t\tkeys.splice( keys.indexOf('original_still'), 1 );\r\n\t\tkeys.splice( keys.indexOf('480w_still'), 1 );\r\n\r\n\t\t/*\r\n\t\t* Filter possible formats with max \r\n\t\t* height and width constraint \r\n\t\t*/\r\n\t\tlet widthToType = {}; \r\n\t\tfor(let i = 0; i < keys.length; i++) {\r\n\t\t\tif ((images[keys[i]].width < maxWidth) && (images[keys[i]].height < maxHeight)) {\r\n\t\t\t\twidthToType[images[keys[i]].width] = keys[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t* Returns format with largest width while satisifying max constraints \r\n\t\t*/\r\n\t\tkeys = Object.keys(widthToType).map((num) =>{return parseInt(num, 10)});\r\n\t\tconst bestKey = Math.max(...keys);\r\n\t\treturn widthToType[bestKey];\r\n\t}\r\n\r\n\t/*\r\n\t* render img or video according format type\r\n\t*/\r\n\trenderImgOrVideo(format) {\r\n\t\tlet {title} = this.props.pic;\r\n\t\tconst IMG = this.props.pic.images[format];\r\n\t\tlet {width} = IMG;\r\n\t\tlet {height} = IMG;\r\n\t\tlet is_img = true;\r\n\t\tif (IMG.url === undefined) {\r\n\t\t\tis_img = false;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t* Scale an image if it's too small \r\n\t\t*/\r\n\t\tconst SCALES = [2,1.75, 1.5,1.25];\r\n\t\tfor (let i = 0; i < SCALES.length; i++) { \r\n\t\t\tif ((width <= this.calculateMaxWidth()/SCALES[i]) && (height <= this.calculateMaxHeight()/SCALES[i])) {\r\n\t\t\t\twidth *= SCALES[i];\r\n\t\t\t\theight *= SCALES[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!is_img) {\r\n\t\t\tconst {mp4} = IMG;\r\n\t\t\treturn (\r\n\t\t\t\t<video src={mp4}\r\n\t\t\t\tautoPlay loop muted playsInline \r\n\t\t\t\tonError={()=>{this.onError=()=>{}; this.src=mp4;}}>\r\n            \t</video>\r\n\t\t\t); \r\n\t\t} else {\r\n\t\t\tconst {url} = IMG; \r\n\t\t\treturn (\r\n\t\t\t\t<img src={url} height={height} width={width} alt={title}/>\r\n\t\t\t); \r\n\t\t} \r\n\t}\r\n\r\n\trenderSharePanel() {\r\n\t\tconst {url} = this.props.pic;\r\n\t\tconst {bitly_url} = this.props.pic;\r\n\t\tconst {embed_url} = this.props.pic;\r\n\t\tconst {source} = this.props.pic;\r\n\t\tconst {source_post_url} = this.props.pic;\r\n\t\tconst style = {\r\n\t\t\topacity: this.props.share_is_off ? 1 : 0,\r\n\t\t}\r\n\r\n\t\treturn (<div className=\"share-box panel\" style={style}>\r\n\t\t\t\t\t<a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{'Original'}</a>\r\n\t\t\t\t\t<a href={bitly_url} target=\"_blank\" rel=\"noopener noreferrer\">{'Bitly'}</a>\r\n\t\t\t\t\t<a href={embed_url} target=\"_blank\" rel=\"noopener noreferrer\">{'Embed'}</a>\r\n\t\t\t\t\t<a href={source} target=\"_blank\" rel=\"noopener noreferrer\">{'Source'}</a>\r\n\t\t\t\t\t<a href={source_post_url} target=\"_blank\"  rel=\"noopener noreferrer\">{'Source Post'}</a>\r\n\t\t\t\t</div>); \r\n\t}\r\n\r\n\trenderInfoPanel(format) {\r\n\t\tconst {username} = this.props.pic;\r\n\t\tconst {rating} = this.props.pic;\r\n\t\tlet {import_datetime} = this.props.pic;\r\n\t\tconst {width} = this.props.pic.images[format];\r\n\t\tconst {height} = this.props.pic.images[format];\r\n\t\timport_datetime = (import_datetime ? import_datetime.slice(5,7)  + \"/\" + import_datetime.slice(8,10) + \"/\" + import_datetime.slice(0,4) : 'N/A');\r\n\t\tlet source = 'URL'; \r\n\t\tif (this.props.pic.images[format].url === undefined) {\r\n\t\t\tsource = 'MP4';\r\n\t\t}\r\n\t\tconst style = {\r\n\t\t\topacity: this.props.btn_is_x ? 1 : 0,\r\n\t\t}\r\n\t\treturn (<div className=\"info-box panel\" style={style}>\r\n\t\t\t\t\t<div>{'Owner: ' + (username ? username : 'N/A')}</div>\r\n\t\t\t\t\t<div>{'Rating: ' + rating.toUpperCase()}</div>\r\n\t\t\t\t\t<div>{'Dimension: ' + width +' x ' + height + ' px'}</div>\r\n\t\t\t\t\t<div>{'Uploaded: ' + import_datetime}</div>\r\n\t\t\t\t\t<div>{'Type: ' + source}</div>\t\t\t\t\t\t\t\r\n\t\t\t\t</div>);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.pic === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {title} = this.props.pic;\r\n\t\tconst format = this.findBestImageFormat();\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"gif-expanded\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"title-container\">\r\n\t\t\t\t\t\t<h1 className=\"title GIF-TITLE\">{(title ? title : 'N/A')}</h1>\r\n\t\t\t\t\t\t<GifButtons pic={this.props.pic} btn_is_x={this.props.btn_is_x} handleInfoButton={this.props.handleInfoButton} handleShareButton={this.props.handleShareButton} handleFavoriteButton={this.props.handleFavoriteButton} share_is_off={this.props.share_is_off} favorites={this.props.favorites}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"asset-container\">\r\n\t\t\t\t\t\t{this.renderImgOrVideo(format)}\t\r\n\t\t\t\t\t\t{this.renderInfoPanel(format)}\t\r\n\t\t\t\t\t\t{this.renderSharePanel()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default GifExpanded;\r\n"]},"metadata":{},"sourceType":"module"}